<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <!-- à¸à¸³à¸«à¸™à¸” pattern à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰à¸£à¹ˆà¸§à¸¡à¸à¸±à¸™ -->
    <property name="LOG_PATTERN" value="%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"/>

    <!-- ðŸ”¹ INFO + DEBUG + WARN log -->
    <appender name="INFO_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/app.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
            <!-- à¸§à¸±à¸™à¸—à¸µà¹ˆ + index (à¸ªà¸³à¸«à¸£à¸±à¸šà¸«à¸¥à¸²à¸¢à¹„à¸Ÿà¸¥à¹Œà¹ƒà¸™à¸§à¸±à¸™à¹€à¸”à¸µà¸¢à¸§à¸à¸±à¸™) -->
	        <fileNamePattern>logs/app.%d{yyyy-MM-dd}.%i.log</fileNamePattern>
	
	        <!-- à¸«à¸¡à¸²à¸¢à¸–à¸¶à¸‡à¹ƒà¸Šà¹‰à¸à¸²à¸£ split à¸•à¸²à¸¡à¸‚à¸™à¸²à¸” + à¹€à¸§à¸¥à¸² -->
	        <timeBasedFileNamingAndTriggeringPolicy
	            class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP" />
	
	        <!-- à¸à¸³à¸«à¸™à¸”à¸‚à¸™à¸²à¸”à¸ªà¸¹à¸‡à¸ªà¸¸à¸”à¸‚à¸­à¸‡à¹à¸•à¹ˆà¸¥à¸°à¹„à¸Ÿà¸¥à¹Œ -->
	        <maxFileSize>10MB</maxFileSize>
	
	        <!-- à¹€à¸à¹‡à¸šà¹„à¸Ÿà¸¥à¹Œà¸¢à¹‰à¸­à¸™à¸«à¸¥à¸±à¸‡ 10 à¸§à¸±à¸™ -->
            <maxHistory>10</maxHistory>
            <totalSizeCap>1GB</totalSizeCap>
        </rollingPolicy>
        <encoder>
            <pattern>${LOG_PATTERN}</pattern>
        </encoder>
        <filter class="ch.qos.logback.classic.filter.LevelFilter">
            <level>ERROR</level>             <!-- à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸£à¸°à¸”à¸±à¸š ERROR -->
	        <onMatch>DENY</onMatch>          <!-- à¸–à¹‰à¸²à¹€à¸›à¹‡à¸™ ERROR â†’ à¹„à¸¡à¹ˆà¹€à¸‚à¸µà¸¢à¸™ log -->
	        <onMismatch>ACCEPT</onMismatch>  <!-- à¸–à¹‰à¸²à¹„à¸¡à¹ˆà¹ƒà¸Šà¹ˆ ERROR (à¹€à¸Šà¹ˆà¸™ INFO, WARN, DEBUG) â†’ à¹€à¸‚à¸µà¸¢à¸™à¸¥à¸‡à¹„à¸Ÿà¸¥à¹Œà¸™à¸µà¹‰ -->
        </filter>
    </appender>

    <!-- ðŸ”´ ERROR log -->
    <appender name="ERROR_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>logs/error.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
            <fileNamePattern>logs/error.%d{yyyy-MM-dd}.%i.log</fileNamePattern>
            
            <!-- à¸«à¸¡à¸²à¸¢à¸–à¸¶à¸‡à¹ƒà¸Šà¹‰à¸à¸²à¸£ split à¸•à¸²à¸¡à¸‚à¸™à¸²à¸” + à¹€à¸§à¸¥à¸² -->
	        <timeBasedFileNamingAndTriggeringPolicy
	            class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP" />
	
	        <!-- à¸à¸³à¸«à¸™à¸”à¸‚à¸™à¸²à¸”à¸ªà¸¹à¸‡à¸ªà¸¸à¸”à¸‚à¸­à¸‡à¹à¸•à¹ˆà¸¥à¸°à¹„à¸Ÿà¸¥à¹Œ -->
	        <maxFileSize>10MB</maxFileSize>
	
	        <!-- à¹€à¸à¹‡à¸šà¹„à¸Ÿà¸¥à¹Œà¸¢à¹‰à¸­à¸™à¸«à¸¥à¸±à¸‡ 10 à¸§à¸±à¸™ -->
            <maxHistory>10</maxHistory>
            <totalSizeCap>1GB</totalSizeCap>
        </rollingPolicy>
        <encoder>
            <pattern>${LOG_PATTERN}</pattern>
        </encoder>
        <filter class="ch.qos.logback.classic.filter.LevelFilter">
            <level>ERROR</level>
            <onMatch>ACCEPT</onMatch>	<!-- à¹€à¸‚à¸µà¸¢à¸™à¹€à¸‰à¸žà¸²à¸° ERROR -->
            <onMismatch>DENY</onMismatch>
        </filter>
    </appender>

    <!-- ðŸŸ¢ Console log -->
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>${LOG_PATTERN}</pattern>
        </encoder>
    </appender>

    <!-- ðŸ“ Logger à¸—à¸±à¹‰à¸‡à¸£à¸°à¸šà¸š -->
    <root level="INFO">
        <appender-ref ref="INFO_FILE"/>
        <appender-ref ref="ERROR_FILE"/>
        <appender-ref ref="CONSOLE"/>
    </root>

</configuration>